#cloud-config
chpasswd: { expire: False }
password: qwerty
runcmd:
 - 'ip link add vxlan0 type vxlan id 12345 dev enp0s3 dstport 0'
 - 'bridge fdb append to 00:00:00:00:00:00 dst 192.168.124.101 dev vxlan0'
 - 'ip addr add 10.255.0.102/24 dev vxlan0'
 - 'ip link set up dev vxlan0'
 - 'docker-compose -f /mnt/docker-compose.yml up'

mounts:
 - [ /dev/sr0, /mnt ]

package_upgrade: false
packages: ['docker-ce', 'docker-compose']
apt:
#  preserve_sources_list: true
#  sources:
#     - source: deb https://download.docker.com/linux/ubuntu
  sources:
    docker-ppa.list:
      # 2.1 source
      #
      # Creates a file in /etc/apt/sources.list.d/ for the sources list entry
      # based on the key: "/etc/apt/sources.list.d/curtin-dev-ppa.list"
      source: "deb [arch=amd64] https://download.docker.com/linux/ubuntu xenial stable" # i really dont know why RELEASE substitution fails here

      # 2.2 keyid
      #
      # Importing a gpg key for a given key id. Used keyserver defaults to
      # keyserver.ubuntu.com
      keyid: 0EBFCD88 # GPG key ID published on a key server
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCcb/BmUR08JMouA8465GqBgmhVofKYgl/45nQN6J9wxreJqG9OZlx6I8E8MPwprL6mJJ2sfMXjQ0hQfFQBwFXoyBmJRqMCnbG8wO375lD4KFgqOuVmyDlue+j8wdIeWIPYx7Z5ZodDHqtqRkA+Pu9LYvu1o3M98740y8A/5LXFsAz1d9WaUyG8k04aKsDDERQznFIfuWn86KdA17kk2wf3XIutA7/0UhTKzp+6mflg8IHQNP+BJhqrykxI3reMTnGfIvFOdEpUkZpSRWSoqV3BV/eoYK2dgPyr8ITSuq8/22hvKtLVawFtgIqWByaBgVG6v+wE1K44x4Wt0uoE1cD5eBoS80KAzyxYWRv2jgNncwpAmiN0Sy4u8nKmo75XFERZ38cpN4P09K58PAiAXaDOb7mvIaew9/p380ma1dJLU+4/ZIVYiNWlqEzeAGcdPU6hoyZ+kD7ePwF/r8HlMsea1svIuzBeFefUfJ8Ikzo/IuL/o6v8wt3Ye46Nro+ucR5DgN3AHbRGLnjo4/NOHZ+DtrwSrpHxi2VKPtwvufV/7Cgh56lfnHASS45BaSGlF0D1l7lLdWb3Z4tqnQihnhMvCQTD5BHiXKDUSKnGytpStTLQ1mXm7zHK6JeCTC7LmR03/BjY9zXUvnmS4xa4FVnZR7+rF0v32xgnSeWQg4fJnw== tavrovskayasofya87@gmail.com 
